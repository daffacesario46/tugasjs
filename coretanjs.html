<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data pegawai</title>
</head>
<body>
    <table id="pegawaTable" border="1">
        <thead>
            <tr>
                <th>Nama pegawai</th>
                <th>Jabatan</th>
                <th>Status</th>
                <th>Gaji Pokok</th>
                <th>Tunjangan Jabatan</th>
                <th>BPJS</th>
                <th>Tunjangan Keluarga</th>
                <th>Total Gaji</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
        <tfoot>
            <tr>
                <td colspan="7">Total Gaji</td>
                <td id="totalGaji"></td>
            </tr>
        </tfoot>
    </table>

    <script>
        //Data pegawai
        var pegawai = {
            nama: "Ridwan",
            jabatan: "Manager",
            status: "Menikah"
        };

        //fungsi untuk menghitung gaji
        function hitungGaji(jabatan,status) {
            var gajiPokok;

            switch(jabatan) {
                case "Manager":
                    gajiPokok = 15000000;
                    break;
                case "Asisten Manager":
                    gajiPokok = 10000000;
                    break;
                case "Staff":
                    gajiPokok = 5000000;
                    break;
                default:
                    gajiPokok = 0
            }
            
            var tunjanganJabatan = gajiPokok * 0.15;
            var bpjs = gajiPokok * 0.10;
            var tunjanganKeluarga = status === "Menikah" ? gajiPokok * 0.20 : 0;
            var totalGaji = gajiPokok + tunjanganJabatan + bpjs + tunjanganKeluarga;

            return [gajiPokok, tunjanganJabatan, bpjs, tunjanganKeluarga, totalGaji];
        }

        //menampilkan data pegawai dalam tabel 
        var tbody = document.querySelector("#pegawaiTable tbody");
        var totalGajiCell = document.getElementById("totalGaji");

        var dataGaji = hitungGaji(pegawai.jabatan, pegawai.status);
        var row = "<tr>" +
                    "<td>" + pegawai.nama + "</td>" + 
                    "<td>" + pegawai.jabatan + "</td>" +
                    "<td>" + pegawai.status + "</td>" +
                    "<td>" + formatRupiah(dataGaji[0]) + "</td>" +
                    "<td>" + formatRupiah(dataGaji[1]) + "</td>" +
                    "<td>" + formatRupiah(dataGaji[2]) + "</td>" +
                    "<td>" + formatRupiah(dataGaji[3]) + "</td>" +
                    "<td>" + formatRupiah(dataGaji[4]) + "</td>" +
                "</tr>";
        tbody.innerHTML = row;

        totalGajiCell.textContent = formatRupiah(dataGaji[4]);

        //Fungsi untuk format angka menjadi format rupiah
        function formatRupiah(angka) {
            var reverse = angka.toString().split('').reverse().join(''),
                ribuan = reverse.match(/\d{1,3}/g);
            ribuan = ribuan.join('.').split('').reverse().join('');

            return ribuan
            
        }
    </script>
</body>
</html>